(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[311],{2024:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var a=t(5155),r=t(2115),l=t(9373),o=t(4725);let n=(e,s)=>(0,l.I)({queryKey:["dashboardOverview",e,s],queryFn:async()=>{let{data:t}=await o.A.get("/Dashboard/overview",{params:{currentYear:e,comparisonYear:s}});return t},staleTime:3e5});var d=t(4065);function i(){let[e,s]=(0,r.useState)(new Date().getFullYear()),[t,l]=(0,r.useState)(e-1),{data:o,isLoading:i,error:c}=n(e,t);if(i)return(0,a.jsx)("div",{children:"Loading dashboard..."});if(c)return(0,a.jsxs)("div",{children:["Error: ",c.message]});let{totalPaymentsThisMonth:m,activeConsumers:x,totalCollectedMoney:h,totalCollectibles:u,monthlyIncomeThisYear:b,monthlyIncomeLastYear:j,systemLossThisYear:f,systemLossLastYear:v}=o||{};if(!b)return(0,a.jsx)("div",{children:"Error: Monthly Income data not found"});let N={labels:b.map(e=>e.month),datasets:[{label:"Income ".concat(e),data:b.map(e=>e.value),borderColor:"rgba(255, 99, 132, 1)",borderWidth:2,fill:!1,tension:.4},{label:"Income ".concat(t),data:j.map(e=>e.value),borderColor:"rgba(54, 162, 235, 1)",borderWidth:2,fill:!1,tension:.4}]},g={labels:f.map(e=>e.month),datasets:[{label:"System Loss ".concat(e),data:f.map(e=>e.value),borderColor:"rgba(75, 192, 192, 1)",borderWidth:2,fill:!1,tension:.4},{label:"System Loss ".concat(t),data:v.map(e=>e.value),borderColor:"rgba(153, 102, 255, 1)",borderWidth:2,fill:!1,tension:.4}]};return(0,a.jsxs)("div",{className:"bg-slate-100 text-black min-h-screen",children:[(0,a.jsx)("div",{className:"flex p-2 bg-white shadow-inner justify-between items-start",children:(0,a.jsx)("h1",{className:"text-2xl font-bold pl-2",children:"Dashboard"})}),(0,a.jsxs)("div",{className:"p-8 bg-slate-100 text-black",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 ",children:[(0,a.jsxs)("div",{className:"bg-white p-6 shadow rounded-md",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Payments and Consumers"}),(0,a.jsx)("hr",{className:"border-t-2 border-gray-200 my-4"}),(0,a.jsxs)("div",{className:"mt-4 flex flex-col md:flex-row justify-between mx-10 items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("h4",{className:"text-gray-600",children:"Active Consumers"}),(0,a.jsx)("p",{className:"font-bold text-3xl",children:x})]}),(0,a.jsxs)("div",{className:"flex items-center flex-col",children:[(0,a.jsx)("h4",{className:"text-gray-600",children:"Total Payments"}),(0,a.jsx)("p",{className:"font-bold text-3xl",children:m})]})]}),(0,a.jsx)("hr",{className:"border-t-2 border-gray-200 my-4"}),(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center mx-5 md:justify-between md:flex-row",children:[(0,a.jsx)("h4",{className:"text-gray-400 ",children:"To Pay"}),(0,a.jsx)("p",{className:"font-bold text-xl text-red-600",children:x-m})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 shadow rounded-md",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Month's Revenue Overview"}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("hr",{className:"border-t-2 border-gray-200 my-4"}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("h4",{className:"text-gray-600",children:"Total Money for this Month"}),(0,a.jsxs)("p",{className:"font-bold text-3xl text-green-600",children:["₱ ",h.toLocaleString()]})]}),(0,a.jsx)("hr",{className:"border-t-2 border-gray-200 my-4"}),(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center mx-5 md:justify-between lg:flex-row",children:[(0,a.jsx)("h4",{className:"text-gray-400 ",children:"Collectibles"}),(0,a.jsxs)("p",{className:"font-bold text-xl text-red-600",children:["₱ ",u.toLocaleString()]})]})]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-700",children:"Comparison Year"}),(0,a.jsxs)("select",{value:t,onChange:e=>l(Number(e.target.value)),className:"mt-2 p-2 border rounded-md",children:[(0,a.jsx)("option",{value:e-1,children:e-1}),(0,a.jsx)("option",{value:e-2,children:e-2}),(0,a.jsx)("option",{value:e-3,children:e-3}),(0,a.jsx)("option",{value:e-4,children:e-4})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 shadow rounded-md mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"MONTHLY REVENUE COMPARISON GRAPH"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsx)(d.N1,{data:N,options:{responsive:!0,maintainAspectRatio:!1}})})]}),(0,a.jsxs)("div",{className:"bg-white p-6 shadow rounded-md",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"MONTHLY SYSTEM LOSS COMPARISON GRAPH"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsx)(d.N1,{data:g,options:{responsive:!0,maintainAspectRatio:!1}})})]})]})]})}t(5012)},4725:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var a=t(3464),r=t(7948);let l=a.A.create({baseURL:"https://localhost:7295/api"});l.interceptors.request.use(e=>{let s=r.A.getState().token;return s&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status?console.error("Unauthorized access - token may be expired."):e.response&&403===e.response.status&&console.error("Forbidden access."),Promise.reject(e)));let o=l},7948:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(5453),r=t(6786);let l=(0,a.v)((0,r.Zr)(e=>({token:null,userId:null,userRole:null,setUser:(s,t,a)=>e({token:s,userId:t,userRole:a}),clearUser:()=>e({token:null,userId:null,userRole:null})}),{name:"auth-storage",getStorage:()=>localStorage}))},8923:(e,s,t)=>{Promise.resolve().then(t.bind(t,2024))}},e=>{var s=s=>e(e.s=s);e.O(0,[647,246,373,824,441,684,358],()=>s(8923)),_N_E=e.O()}]);